### 核心知识点梳理：

**1. 从连续到离散的傅里叶变换：**

- **连续傅里叶变换（CFT）**：它的实质是将一个时域波形分解成许多不同频率的正弦波之和 。
    
- **离散傅里叶变换（DFT）**：由于计算机无法处理连续信号，因此需要对信号进行采样，这就引出了离散傅里叶变换（DFT）。
    
- **奈奎斯特定理（采样定理）**：这是数字信号处理的基石。它规定采样频率 fs​ 必须至少是信号最高频率 fmax​ 的两倍（即 fs​≥2fmax​），才能无失真地恢复原始信号 。在实际应用中，采样率通常要达到10倍以上 。
    

**2. 快速傅里叶变换（FFT）：**

- FFT是离散傅里叶变换（DFT）的一种快速计算方法 。
    
- 标准的DFT运算需要
    
    N2 次复数乘法，计算量巨大 。
    
- FFT算法（特别是常用的基2算法）通过利用DFT的对称等特性，将乘法计算量显著降低到
    
    (N/2)log2​(N) 次 。进行FFT变换时，通常要求采样点数N为2的整数次幂 。
    

**3. FFT的常见问题与解决方案：**

- **频谱泄露 (Spectral Leakage):**
    
    - **现象**：在分析结果中出现了信号原本没有的频率分量 。能量从真实的频率“泄漏”到了旁边的频点上 。
        
    - **原因**：根本原因是对信号进行采样时，没有做到整周期截断 。
        
    - **解决方案**：最理想的方法是从源头解决，即确保对信号进行整周期截断 。如果无法做到，可以采用加窗函数的方法来改善，但这只能减弱影响，无法完全避免 。
        
- **频谱混叠 (Spectral Aliasing):**
    
    - **现象**：高频分量在分析结果中被错误地呈现为低频分量 。例如，在采样率为8MHz时，一个5MHz的信号在频谱中会表现为3MHz 。
        
    - **原因**：发生混叠是因为采样频率 fs​ 不满足奈奎斯特定理 。
        
    - **解决方案**：一种方法是提高采样率，但有其局限性 。更常用的方法是在采样前增加滤波器（例如硬件低通滤波器或软件数字滤波器），滤除可能引起混叠的高频信号 。
        

**4. 在STM32H750上的实现方法：**

- **浮点运算单元 (FPU)**：STM32H750带有硬件FPU，可以极大地加速浮点运算，这对FFT计算至关重要 。您需要在项目设置中启用它 。
    
- **DSP库**：ST公司提供了数字信号处理（DSP）库，其中包含了FFT等优化过的数学函数 。要使用此库，您需要：
    
    - 手动将对应的库文件（例如
        
        `arm_cortexM7lfsp_math.lib`）添加到您的Keil工程中 。
        
    - 在预处理器定义中添加宏，如
        
        `ARM_MATH_CM7`，以启用DSP库的功能 。
        
- **FFT相关函数**：您将主要用到DSP库中的三个函数：`arm_cfft_radix4_init_f32` 用于初始化，`arm_cfft_radix4_f32` 用于执行变换，以及 `arm_cmplx_mag_f32` 用于计算结果的模值（即幅度）。
    
- **重要提示**：FFT函数的输入数据需要是复数形式。因此，您需要将采集到的实际信号作为实部，并创建一个同样长度、数值全为0的数组作为虚部，一同输入给FFT函数 。